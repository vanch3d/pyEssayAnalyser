openapi: 3.0.1
info:
  title: Swagger pyEssayAnalyser v3
  description: |
    A Swagger/OAS (v3) description of the Essay Analyser API.
    ------------------

    @todo

  contact:
    name: vanch3d
    url: 'https://github.com/vanch3d'
  license:
    name: MIT
    url: 'https://github.com/vanch3d/nvl-slim/blob/master/LICENSE'
  version: 3.3.0
servers:
  - url: 'http://localhost:5000/api'
    description: pyEAv3 DEV server
  - url: 'http://vanch3d.pythonanywhere.com/api'
    description: pyEAv3 PRODUCTION server
paths:
  /analyse:
    post:
      security:
        - ApiKeyAuth: []
      tags:
        - Essay
      summary: Submit a text for analysis
      description: |
        to do
      operationId: essay_post_analysis
      requestBody:
        description: the text to be analysed
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Essay'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Essay'
          text/plain:
            schema:
              type: string
          text/markdown:
            schema:
              type: string
      responses:
        '200':
          description: |
            text analysed; return a data package representing the extractive summarisation of the text
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Summary'
        '404':
          description: |
            to do
        '500':
          description: |
            to do
components:
  securitySchemes:
    ApiKeyAuth:               # arbitrary name for the security scheme
      type: apiKey
      in: header              # can be "header", "query" or "cookie"
      name: PYEA-API-KEY      # name of the header, query parameter or cookie
  schemas:
    Essay:
      required:
        - text
      properties:
        text:
          type: string
    NGrams:
      description: a n-gram
      properties:
        count:
          type: integer
        lemma:
          type: array
          items:
            type: string
        source:
          type: array
          items:
            type: string
        score:
          type: array
          items:
            type: string
        dispersion:
          type: array
          items:
            type: integer
        trend:
          type: array
          items:
            type: integer
    Sentence:
      description: An object representing a summarised sentence of the text
      properties:
        id:
          type: integer
        lemma:
          type: array
          items:
            type: string
        rank:
          description: the 'keyness' ranking of the sentence in the text
          type: integer
        tag:
          type: string
          enum:
            - "#+s:i#"
            - "#dummy#"
        text:
          type: string
    Summary:
      properties:
        data:
          type: object
          properties:
            ngrams:
              type: object
              properties:
                keywords:
                  type: array
                  items:
                    $ref: '#/components/schemas/NGrams'
                bigrams:
                  type: array
                  items:
                    $ref: '#/components/schemas/NGrams'
                trigrams:
                  type: array
                  items:
                    $ref: '#/components/schemas/NGrams'
                quadgrams:
                  type: array
                  items:
                    $ref: '#/components/schemas/NGrams'
            parasenttok:
              description: |
                the text restructured as an array of paragraphs,
                each of them an array of sentences,
                each of them summarising the original sentence in the text
              type: array
              items:
                description: a paragraph, as an array of sentence
                type: array
                items:
                  $ref: '#/components/schemas/Sentence'
        metadata:
          type: object
          properties:
            version:
              type: string
            se_stats:
              type: object
  parameters: {}
tags:
  - name: Essay
    description: The Essay Analyser itself